<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

    <script src="https://rawgit.com/ngokevin/aframe-look-at-component/master/dist/aframe-look-at-component.min.js"></script>
    <script type="text/javascript">
      AFRAME.registerComponent('artworks', {

      init: function () {
        var cursor = document.querySelector('#cursor');
        
        var camera = document.querySelector('#main-camera');
        var images = document.querySelectorAll('a-image');
        // var main_camera=document.querySelector('#main-camera');

        

        images.forEach(function(image) {
          
         
          image.addEventListener('click', function(e) {
            var position = this.getAttribute('position')
            
            camera.setAttribute('animation', {
              to: {x: position.x, y: position.y-3, z: 0},
              
            })
          
            camera.emit('imageClicked')
 
           
          });
          
          
          image.addEventListener('mouseenter', function(e) {
        
        cursor.setAttribute('material', 'color', '#FF0000');
      });

      image.addEventListener('mouseleave', function(e) {
        
        cursor.setAttribute('material', 'color', 'grey');
      });
        })
      }
    });
    </script>
    
    <script>
      AFRAME.registerComponent("show-detail", {
        
        init: function () {
          var element = this.el;
          var textContainerId = 'text-container-' + 1;
          var textContainer = document.querySelector('#' + textContainerId);
          var texts = ["Caf√© Terrace At Night","Sunflowers","The Bedroom","Starry Night","Church at Auvers","The iconic tortured artist, Vincent Van Gogh strove to convey his emotional and spiritual state in each of his artworks."]; 
          for (var i = 1; i <= texts.length; i++) {
        var textContainerId = 'text-container-' + i; 
      
        var textContainer = document.querySelector('#' + textContainerId); 
        textContainer.setAttribute('value', texts[i - 1]); 
      }

          element.addEventListener("mouseenter", function () {
            
          });

         
          element.addEventListener("mouseleave", function () {
            
          });

          element.addEventListener("click", function () {
          
          });
        },
        
       
        tick: function () {
          var element = this.el;
          
          
          var camera = this.el.sceneEl.camera.el;
          var rotation = camera.getAttribute("rotation");
          
          
          
          var opacity_down = Math.min(Math.min(rotation.x + 10.0, 0) * -5.0, 50);
           var opacity_right = Math.min(Math.min(rotation.y + 10.0, 0) * -5.0, 50);
          var opacity_left = Math.min(Math.min(-rotation.y + 10.0, 0) * -5.0, 50);
          
          
         
          element.querySelector(".down").setAttribute("opacity", opacity_down * 0.02);
           
        }
         
      });
       
    </script>
    
    
     <script>
        
        window.addEventListener('load', function() {
         
            var clickableImage = document.querySelector('#link');

            
            clickableImage.addEventListener('click', function () {
               
                window.location.href = 'galleryMenu.html';
            });
        });
    </script>
    <script>
        
        window.addEventListener('load', function() {
         
            var clickableImage = document.querySelector('#link_music');

            
            clickableImage.addEventListener('click', function () {
               
                window.location.href = 'musicPage.html';
            });
        });
    </script>
     <script>
      
      if ('webkitSpeechRecognition' in window) {
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = true; 
        recognition.lang = 'en-US';
        recognition.start();
         
         
       

        recognition.onresult = function(event) {
          var last = event.results.length - 1;
          var command = event.results[last][0].transcript.trim().toLowerCase();

          
          if (command === 'change background') {
            document.querySelector('a-sky').setAttribute('color', getRandomColor());
          }
          else if(command==='dark mode') {
            document.querySelector('a-sky').setAttribute('color', '#333333');
          }
          else if(command==='light mode') {
             document.querySelector('a-sky').setAttribute('color', '#f5f5f5');
          }
          else if(command==='normal mode') {
             document.querySelector('a-sky').setAttribute('color', '#ECECEC');
          }
         
        };

        function getRandomColor() {
          var letters = '0123456789ABCDEF';
          var color = '#';
          for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }
      } else {
        console.log('Web Speech API is not supported in this browser.');
      }
      
 
    </script>
    <script>

     window.addEventListener('load', function() {
         
            var light = document.querySelector('#light');
            var isLightMode=true;
            
           
            light.addEventListener('click', function () {
              //  console.log("setting popup........");
              //   var popup = document.querySelector('#popup');
              // popup.setAttribute('visible', !popup.getAttribute('visible')); 
              if(isLightMode==true){
                document.querySelector('a-sky').setAttribute('color', '#333333');
                isLightMode=false;
              }
              else{
                document.querySelector('a-sky').setAttribute('color', '#f5f5f5');
                isLightMode=true;
              }
            });
        });
    </script>
  </head>
  <body>
    <a-scene id="scene" artworks>
      
      <a-entity id="canvas" position="0.10 4.14 4" rotation="0 0 0"
                 >
      
      <a-entity id="main-camera" camera look-controls wasd-controls position="0.10 3 7"  animation="property: position; easing: easeOutQuad; startEvents: imageClicked;">
        <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 1000" raycaster="objects: .clickable"
                  material="color: grey; shader: flat; opacity: 1;" position="0 0 -0.1"
                  geometry="primitive: ring; radiusInner: 0.002; radiusOuter: 0.004"
                  animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 500; from: 0.2 0.2 0.2; to: 1 1 1"
                  animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 800; from: 1 1 1; to: 0.2 0.2 0.2"
                  animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 100; to: 1 1 1"
                  >
                  
        </a-entity>
      </a-entity>
       </a-entity>
      
      
      <a-text  position="0.00 6 -0.3" rotation="0 0 0" scale="1 1 1"
      value="Van Gogh Gallery"  align="center" opacity="1"
      color="#FFE066" wrap-count="36" letter-spacing="16" line-height="80" width="6.00"
       side="double" anchor="center" visible="true"></a-text>
      
      
      <a-image  id="img1" class="clickable" position="0.00 2.20 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/van_1888_1.jpg?v=1708970919445"
       repeat="1 1" visible="true" ></a-image>
      
       <a-entity show-detail look-at="#main-camera">
      <a-plane  class="look-down" position="0 1 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-1" value="1111" color="green" position="0 1 -1" rotation="-15 0 0" width="4"></a-text>
        
      </a-entity>
      
       <a-image  id="img2" class="clickable" position="5 3 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/van_1888_2.jpg?v=1708970922113"
       repeat="1 1" visible="true" ></a-image>
       <a-entity show-detail>
      <a-plane  class="look-down" position="5 5 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-2" value="1111" color="green" position="5 1.5 -1" rotation="-15 0 0" width="4"></a-text>
      
      </a-entity>
      
      
       <a-image  id="img3" class="clickable" position="-5 3 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/van_1889_1.jpg?v=1708970925804"
      repeat="1 1" visible="true" ></a-image>
       <a-entity show-detail>
      <a-plane  class="look-down" position="-5 5 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-3" value="1111" color="green" position="-5 1.5 -1" rotation="-15 0 0" width="4"></a-text>
      
      </a-entity>
      
      <a-image  id="img4" class="clickable" position="-5 8 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/van_1889_2.jpg?v=1708970936577"
       repeat="1 1" visible="true"></a-image>
       <a-entity show-detail>
      <a-plane  class="look-down" position="-5 7 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-4" value="1111" color="green" position="-5 6.5 -1" rotation="-15 0 0" width="4"></a-text>
      
      </a-entity>
      
      <a-image  id="img5" class="clickable" position="5 8 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/van_1890.jpg?v=1708973150069"
      repeat="1 1" visible="true"></a-image>
       <a-entity show-detail>
      <a-plane  class="look-down" position="5 7 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-5" value="1111" color="green" position="5 6.5 -1" rotation="-15 0 0" width="4"></a-text>
        <a-text class="right" position="7 9 -2" opacity="0" rotation="0 -45 0" color="green" value="After Van Gogh left the asylum at Saint-Remy in May 1890 he travelled north to Auvers, outside of Paris. Church at Auvers is one of the most well-known images from the last few months of Van Gogh's life."></a-text>
      </a-entity>
      
      
      
       <a-image  id="img6" class="clickable" position="0 10 -2.00" rotation="0 0 0" scale="1 1 1"
      width="4" height="3"  opacity="1" shader="flat" side="double" src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/image_smoothed_outline.png?v=1708973566746"
      repeat="1 1" visible="true"></a-image>
       <a-entity show-detail>
      <a-plane  class="look-down" position="0 9 -2" rotation="-15 0 0" scale="1 1 1" width="4" height="4" opacity="0" ></a-plane>
        <a-text class="down"  id="text-container-6" value="1111" color="green" position="-2 8 -1" rotation="-15 0 0" width="4"></a-text>
      
      </a-entity>
      
      <a-image src="https://cdn.glitch.global/22e19400-dde1-43da-a3e1-3181efad4ad7/exit.png?v=1708465872346" position="-2 10.5 -1.9" class="clickable" id="link"></a-image>
      <a-image src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/musical-notes.png?v=1708964630656" position="2 10.5 -1.9" class="clickable" id="link_music"></a-image>
      <a-image src="https://cdn.glitch.global/7bbebee2-7df1-450a-96f9-4ab7aa500b6a/light-bulb.png?v=1709554293483" position="0 12 -1.9" class="clickable" id="light"></a-image>
      <a-entity id="popup" visible="true">
        <a-plane position="0 13.1 -1.8" color="#9370DB" width="4" height="1" ></a-plane>
        <a-text value="you can say:" align="center" position="0 13.3 -1.7" color="black" width="5"></a-text>
         <a-text value="'change background'" align="center" position="0 13 -1.7" color="black" width="5"></a-text>
        <a-text value="'light mode'/'dark mode'/'normal mode'" align="center" position="0 12.7 -1.7" color="black" width="5"></a-text>
      </a-entity>
      <a-sky id="sky" color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>
